/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element","./library","sap/ui/unified/MenuItem","sap/ui/table/TableUtils"],function(t,e,i,o){"use strict";var s=e.RowActionType;var n=t.extend("sap.ui.table.RowActionItem",{metadata:{library:"sap.ui.table",properties:{icon:{type:"sap.ui.core.URI",group:"Data",defaultValue:null},visible:{type:"boolean",group:"Misc",defaultValue:true},text:{type:"string",group:"Misc",defaultValue:""},type:{type:"sap.ui.table.RowActionType",group:"Behavior",defaultValue:s.Custom}},events:{press:{item:{type:"sap.ui.table.RowActionItem"},row:{type:"sap.ui.table.Row"}}}}});n.prototype.exit=function(){if(this._menuItem){this._menuItem.destroy();this._menuItem=null}};n.prototype.setIcon=function(t){this.setProperty("icon",t,true);this._updateRowAction();return this};n.prototype.setText=function(t){this.setProperty("text",t,true);this._updateRowAction();return this};n.prototype.setType=function(t){this.setProperty("type",t,true);this._updateRowAction();return this};n.prototype.setVisible=function(t){this.setProperty("visible",t,true);this._updateRowAction(true);return this};n.prototype.setTooltip=function(t){this.setAggregation("tooltip",t,true);this._updateRowAction();return this};n.prototype._doFirePress=function(){var t=this.getParent();this.firePress({item:this,row:t&&t._getRow?t._getRow():null})};n.prototype._getMenuItem=function(){if(!this._menuItem){var t=this;this._menuItem=new i({select:function(e){t._doFirePress()}})}this._menuItem.setIcon(this._getIcon());this._menuItem.setVisible(this.getVisible());this._menuItem.setText(this._getText(false));return this._menuItem};n.prototype._getIcon=function(){var t=this.getIcon();if(t){return t}if(this.getType()==s.Navigation){return"sap-icon://navigation-right-arrow"}if(this.getType()==s.Delete){return"sap-icon://sys-cancel"}return null};n.prototype._getText=function(t){var e=t?this.getTooltip_AsString()||this.getText():this.getText()||this.getTooltip_AsString();if(e){return e}if(this.getType()==s.Navigation){return o.getResourceText("TBL_ROW_ACTION_NAVIGATE")}if(this.getType()==s.Delete){return o.getResourceText("TBL_ROW_ACTION_DELETE")}return null};n.prototype._syncIcon=function(t){t.setSrc(this._getIcon());t.setTooltip(this._getText(true))};n.prototype._updateRowAction=function(t){var e=this.getParent();if(e&&e._updateIcons){e._updateIcons(t)}};return n});