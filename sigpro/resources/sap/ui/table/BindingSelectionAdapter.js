/*
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./SelectionAdapter","./library"],function(e,t){"use strict";var n=t.SelectionMode;var i=e.extend("sap.ui.table.BindingSelectionAdapter");i.prototype.exit=function(){var t=this._getBinding();if(t){t.detachEvent("change",this._onBindingChange)}e.prototype.exit.call(this)};i.prototype.addSelectionInterval=function(e,t){if(this.getSelectionMode()===n.None){return}var i=this._getBinding();if(i&&i.addSelectionInterval){if(this.getSelectionMode()===n.Single){e=t;i.setSelectionInterval(e,t)}i.addSelectionInterval(e,t)}};i.prototype.clearSelection=function(){var e=this._getBinding();if(e&&e.clearSelection){e.clearSelection()}};i.prototype.getSelectedIndex=function(){var e=this._getBinding();if(e&&e.findNode){return e.getSelectedIndex()}else{return-1}};i.prototype.getSelectedIndices=function(){var e=this._getBinding();if(e&&e.findNode&&e.getSelectedIndices){return e.getSelectedIndices()}else{return[]}};i.prototype.getSelectableCount=function(){var e=this._getBinding();if(!e){return 0}else if(e.getGrandTotalContextInfo){var t=e.getGrandTotalContextInfo();return t?t.totalNumberOfLeafs:0}else{return e.getLength()}};i.prototype.getSelectedCount=function(){var e=this._getBinding();if(e&&e.getSelectedNodesCount){return e.getSelectedNodesCount()}else{return 0}};i.prototype.isIndexSelectable=function(e){var t=this._getBinding();if(t){return t.isIndexSelectable(e)}else{return false}};i.prototype.isIndexSelected=function(e){var t=this._getBinding();if(t&&t.isIndexSelected){return t.isIndexSelected(e)}else{return false}};i.prototype.removeSelectionInterval=function(e,t){var n=this._getBinding();if(n&&n.findNode&&n.removeSelectionInterval){n.removeSelectionInterval(e,t)}};i.prototype.selectAll=function(){if(this.getSelectionMode()===n.None){return}var e=this._getBinding();if(e&&e.selectAll){e.selectAll()}};i.prototype.setSelectedIndex=function(e){if(this.getSelectionMode()===n.None){return}if(e===-1){this.clearSelection()}else{var t=this._getBinding();if(t&&t.setSelectedIndex){t.setSelectedIndex(e)}}};i.prototype.setSelectionInterval=function(e,t){if(this.getSelectionMode()===n.None){return}var i=this._getBinding();if(i&&i.setSelectionInterval){if(this.getSelectionMode()===n.Single){e=t}i.setSelectionInterval(e,t)}};i.prototype.setSelectionMode=function(t){var n=this.getSelectionMode();e.prototype.setSelectionMode.apply(this,arguments);if(this.getSelectionMode()!==n){this.clearSelection()}return this};i.prototype._setBinding=function(t){var n=this._getBinding();e.prototype._setBinding.call(this,t);if(n!==t){if(t){t.attachEvent("change",this._onBindingChange,this)}if(n){n.detachEvent("change",this._onBindingChange)}}};i.prototype._onBindingChange=function(e){var t=typeof e==="object"?e.getParameter("reason"):e;if(t==="sort"||t==="filter"){this.clearSelection()}};return i});