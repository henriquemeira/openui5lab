/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["jquery.sap.global","../../Element","../../routing/Router"],function(e,t,a){"use strict";var n=["modelContextChange","beforeRendering","afterRendering","propertyChanged","aggregationChanged","componentCreated","afterInit","updateStarted","updateFinished","load","scroll"];var i={};i.enable=function(){t._trackEvent=function(e,t){i.trackEvent(e,t)};a._trackRouteMatched=function(e,t,n){i.trackRouteMatched(a.M_EVENTS.ROUTE_MATCHED,e,t,n)}};i.disable=function(){if(t._trackEvent){delete t._trackEvent}if(a._trackRouteMatched){delete a._trackRouteMatched}};i.trackEvent=function(t,a){e.sap.delayedCall(0,i,"_trackEvent",[t,new Date,a])};i.trackRouteMatched=function(t,a,n,r){e.sap.delayedCall(0,i,"_trackRouteMatched",[t,new Date,a,n,r])};i._trackEvent=function(t,a,n){var r={};if(i._isTrackable(t,n)){r={eventType:t,elementId:n.getId(),elementType:n.getMetadata().getName(),timestamp:a.getTime()};e.sap.log.debug("UsageAnalytics: Track Event: "+JSON.stringify(r));i._saveToBackend(r)}};i._trackRouteMatched=function(t,a,n,r,o){var c={eventType:t,elementId:n,elementType:"sap.ui.core.routing.Router",timestamp:a.getTime(),additionalAttributes:{routerInfo:r.getURL(o.name,o.arguments),fullURL:window.location.href,hash:window.location.hash}};e.sap.log.debug("UsageAnalytics: Track Route Matched: "+JSON.stringify(c));i._saveToBackend(c)};i._saveToBackend=function(t){var a=[t.timestamp,t.eventType,t.elementId,t.elementType],n;if(t.additionalAttributes){for(n in t.additionalAttributes){a.push(t.additionalAttributes[n])}}if(window.swa){window.swa.trackCustomEvent.apply(window.swa,a)}else{e.sap.log.warning("UsageAnalytics; No SAP Web Analytics service is defined. Please provide a global"+" instance variable named <swa>")}};i._isTrackable=function(e,t){return n.indexOf(e)===-1&&i._isPublicElementEvent(e,t)};i._isPublicElementEvent=function(e,t){return!!t.getMetadata().getEvent(e)};return i},true);