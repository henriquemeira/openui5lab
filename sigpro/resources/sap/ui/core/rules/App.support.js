/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/support/library"],function(e){"use strict";var t=e.Categories;var o=e.Severity;var n=e.Audiences;var a=["jQuery.sap.require","$.sap.require","sap.ui.requireSync","jQuery.sap.sjax"];if(jQuery&&jQuery.sap&&!!Object.getOwnPropertyDescriptor(jQuery.sap,"sjax").value){a.push("jQuery.sap.syncHead","jQuery.sap.syncGet","jQuery.sap.syncPost","jQuery.sap.syncGetText","jQuery.sap.syncGetJSON")}var r={id:"controllerSyncCodeCheck",audiences:[n.Internal],categories:[t.Consistency],enabled:true,minversion:"1.32",title:"Synchronous calls in controller code",description:"Synchronous calls are deprecated within the Google Chrome browser and block the UI.",resolution:"Use asynchronous XHR calls instead",resolutionurls:[{text:"Documentation: Loading a Module",href:"https://sapui5.hana.ondemand.com/#docs/guide/d12024e38385472a89c1ad204e1edb48.html"}],check:function(e,t,n){var r=n.getElementsByClassName(sap.ui.core.mvc.View);var i=[];r.forEach(function(e){if(e.getController){var t=e.getController();if(t){i.push({controller:t,viewId:e.getId()})}}});var s=function(e,t,o,n){var a=[];Object.keys(e).forEach(function(a){var r=e[a].toString().replace(/(\r\n|\n|\r)/gm,"");o.forEach(function(o){if(r.indexOf(o)>0){n(e.getMetadata().getName(),a,o,t)}})});return a};var c={};i.forEach(function(e){var t=function(e,t,o,n){c[n]=c[n]||[];c[n].push({controllerName:e,functionName:t,invalidContent:o})};var o=e.controller;while(o){s(o,e.viewId,a,t);var n=Object.getPrototypeOf(o);if(o===n||n===sap.ui.core.mvc.Controller.prototype){break}o=n}});Object.keys(c).forEach(function(t){var n=c[t];e.addIssue({severity:o.Medium,details:n.map(function(e){return"Synchronous call "+e.invalidContent+" found in "+e.controllerName+"#"+e.functionName}).reduce(function(e,t){return e+"\n"+t}),context:{id:t}})})}};var i={id:"globalApiUsage",audiences:[n.Internal],categories:[t.Modularization],enabled:true,minversion:"1.58",title:"Call of deprecated global API",description:"Calls of deprecated global API without declaring the according dependency should be avoided.",resolution:"Declare the dependency properly or even better: Migrate to the modern module API as documented.",resolutionurls:[{text:"Documentation: Modularization",href:"https://openui5.hana.ondemand.com/#/api"}],check:function(e,t,n){var a=n.getLoggedObjects("jquery.sap.stubs");a.forEach(function(t){e.addIssue({severity:o.High,details:t.message,context:{id:"WEBPAGE"}})})}};var s={id:"jquerySapUsage",audiences:[n.Internal],categories:[t.Modularization],enabled:true,minversion:"1.58",async:true,title:"Usage of deprecated jquery.sap module",description:"Usage of deprecated jquery.sap API should be avoided and dependencies to jquery.sap "+"are not needed any longer. This rule only works on global execution scope.",resolution:"Migrate to the modern module API as documented.",resolutionurls:[{text:"Documentation: Modularization",href:"https://openui5.hana.ondemand.com/#/topic/a075ed88ef324261bca41813a6ac4a1c"}],check:function(e,t,n,a){if(n.getType()==="global"){sap.ui.require(["sap/base/util/LoaderExtensions"],function(t){var n="Usage of deprecated jquery.sap modules detected: \n"+t.getAllRequiredModules().filter(function(e){return e.startsWith("jquery.sap")}).reduce(function(e,t){return e+"\t- "+t+"\n"},"");e.addIssue({severity:o.Medium,details:n,context:{id:"WEBPAGE"}});a()})}}};var c={id:"syncFactoryLoading",audiences:[n.Internal],categories:[t.Modularization],enabled:true,minversion:"1.58",title:"Usage of deprecated synchronous factories",description:"Usage of deprecated synchronous factories",resolution:"Avoid using synchronous factory functions. Use the create() and/or load() functions of the respective modules instead. For example: View.create(...) or Component.load(). Migrate to the modern module API as documented.",resolutionurls:[{text:"Documentation: Legacy Factories Replacement",href:"https://openui5.hana.ondemand.com/#/topic/491bd9c70b9f4c4d913c8c7b4a970833"}],check:function(e,t,n){var a=["sap.ui.fragment","sap.ui.xmlfragment","sap.ui.jsfragment","sap.ui.htmlfragment","sap.ui.controller","sap.ui.extensionpoint","sap.ui.component","sap.ui.view","sap.ui.template"];a.forEach(function(t){var a=n.getLoggedObjects(t);a.forEach(function(t){e.addIssue({severity:o.High,details:t.message,context:{id:"WEBPAGE"}})})})}};var d={id:"globalSyncXHR",audiences:[n.Internal],categories:[t.Consistency],enabled:true,minversion:"1.59",title:"Sending of synchronous XHR",description:"Sending synchronus XHRs has to be avoided.",resolution:"Check the details of the findings for tips to fix the issue.",resolutionurls:[{text:"Performance: Speed Up Your App",href:"https://sapui5.hana.ondemand.com/#/topic/408b40efed3c416681e1bd8cdd8910d4"},{text:"Configuration of 'sap.ui.loader'",href:"https://sapui5.hana.ondemand.com/#/api/sap.ui.loader"}],check:function(e,t,n){var a=n.getLoggedObjects("SyncXHR");a.forEach(function(t){e.addIssue({severity:o.High,details:t.message,context:{id:"WEBPAGE"}})})}};var u={id:"deprecatedApiUsage",audiences:[n.Internal],categories:[t.Modularization],enabled:true,minversion:"1.59",title:"Usage of deprecated API",description:"Usage of deprecated API should be avoided.",resolution:"Check the details of the findings for tips to fix the issue.",resolutionurls:[{text:"Documentation: Adapting to the Modularization of the Core",href:"https://openui5.hana.ondemand.com/#/topic/b8fdf0c903424c9191f142842323ae22"}],check:function(e,t,n){var a=n.getLoggedObjects("Deprecation");a.forEach(function(t){e.addIssue({severity:o.High,details:t.message,context:{id:"WEBPAGE"}})})}};var l={id:"controllerExtension",audiences:[n.Internal],categories:[t.Usage],enabled:true,minversion:"1.61",title:"Wrong usage of Controller Extension API",description:"Your controller extension definition is a subclass of sap.ui.core.mvc.Controller.",resolution:"Your controller extension module should return a plain object.",check:function(e,t,n){var a=n.getLoggedObjects("ControllerExtension");a.forEach(function(t){e.addIssue({severity:o.Medium,details:t.message,context:{id:"WEBPAGE"}})})}};return[r,i,s,c,d,u,l]},true);