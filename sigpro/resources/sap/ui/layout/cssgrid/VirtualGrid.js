/**
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/Object","sap/ui/layout/library"],function(t){"use strict";function i(){var t=0;for(var i=0;i<this.virtualGridMatrix.length;i++){if(this.virtualGridMatrix[i][0]!==0){t++}}if(t>0){this.addEmptyRows(t)}}function r(t){return t==0}var e=t.extend("sap.f.VirtualGrid");e.prototype.init=function(t){this.virtualGridMatrix=[[]];this.numberOfCols=t.numberOfCols?t.numberOfCols:1;this.numberOfRows=t.numberOfRows?t.numberOfRows:1;this.cellWidth=t.cellWidth?t.cellWidth:5;this.cellHeight=t.cellHeight?t.cellHeight:5;this.unitOfMeasure=t.unitOfMeasure?t.unitOfMeasure:"rem";this.iGapSize=t.gapSize?t.gapSize:1;this.items={};this.topOffset=t.topOffset?t.topOffset:0;this.leftOffset=t.topOffset?t.leftOffset:0;for(var i=0;i<this.numberOfRows;i++){for(var r=0;r<this.numberOfCols;r++){this.virtualGridMatrix[i][r]=0}}};e.prototype.addEmptyRows=function(t){var i=this.virtualGridMatrix.length;for(var r=i;r<i+t;r++){this.virtualGridMatrix[r]=Array.apply(null,Array(this.numberOfCols)).map(Number.prototype.valueOf,0)}};e.prototype.getItems=function(){return this.items};e.prototype.getMatrix=function(){return this.virtualGridMatrix};e.prototype.getHeight=function(){var t=0;for(var i=0;i<this.virtualGridMatrix.length;i++){if(!this.virtualGridMatrix[i].every(r)){t++}}return t*(this.cellHeight+(this.iGapSize-1))};e.prototype.calculatePositions=function(){for(var t=0;t<this.virtualGridMatrix.length;t++){for(var i=0;i<this.virtualGridMatrix[t].length;i++){if(!this.items[parseInt(this.virtualGridMatrix[t][i])].calculatedCoords){var r=this.items[this.virtualGridMatrix[t][i]];r.top=t*(this.cellHeight+this.iGapSize)+this.topOffset+this.unitOfMeasure;r.left=i*(this.cellWidth+this.iGapSize)+this.leftOffset+this.unitOfMeasure;r.width=r.cols*(this.cellHeight+this.iGapSize)-this.iGapSize+this.unitOfMeasure;r.height=r.rows*(this.cellWidth+this.iGapSize)-this.iGapSize+this.unitOfMeasure;r.calculatedCoords=true}}}};e.prototype.fitElement=function(t,r,e,s){var a;var l=this;this.items[t]={rows:e,cols:r,calculatedCoords:false};if(e>this.virtualGridMatrix.length){this.addEmptyRows(e-this.virtualGridMatrix.length)}if(s){i.call(this)}this.virtualGridMatrix.forEach(function(i,s,f){i.forEach(function(i,f,u){if(l.virtualGridMatrix[s][f]===0&&!a){if(l.shouldElementFit(s,f,r,e)){l.fillElement(s,f,r,e,t);a=true}}})});if(!a&&s){this.virtualGridMatrix.forEach(function(i,r){i.forEach(function(i,s){if(l.virtualGridMatrix[r][s]===0&&!a){if(l.shouldElementFit(r,s,l.numberOfCols,e)){l.fillElement(r,s,l.numberOfCols,e,t);a=true}}})})}if(!a){this.fitElement(t,r,e,true)}};e.prototype.shouldElementFit=function(t,i,r,e){var s=t+e;var a=i+r;var l=this.virtualGridMatrix;for(var f=t;f<s;f++){for(var u=i;u<a;u++){if(l[f][u]!==0||l.length<s||l[f].length<i+r){return false}}}return true};e.prototype.fillElement=function(t,i,r,e,s){for(var a=t;a<t+e;a++){for(var l=i;l<i+r;l++){this.virtualGridMatrix[a][l]=s}}};return e});