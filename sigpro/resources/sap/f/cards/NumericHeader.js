/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/m/NumericContent","sap/m/Text","sap/f/cards/Data","sap/ui/model/json/JSONModel","sap/f/cards/NumericSideIndicator","sap/f/cards/NumericHeaderRenderer"],function(t,e,i,n,r,a){"use strict";var s=t.extend("sap.f.cards.NumericHeader",{metadata:{interfaces:["sap.f.cards.IHeader"],properties:{title:{type:"string",group:"Appearance"},subtitle:{type:"string",group:"Appearance"},unitOfMeasurement:{type:"string",group:"Data"},number:{type:"string",group:"Data"},unit:{type:"string",group:"Data"},trend:{type:"sap.m.DeviationIndicator",group:"Appearance",defaultValue:"None"},state:{type:"sap.m.ValueColor",group:"Appearance",defaultValue:"Neutral"},details:{type:"string",group:"Appearance"}},aggregations:{sideIndicators:{type:"sap.f.cards.NumericSideIndicator",multiple:true},_title:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_subtitle:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_unitOfMeasurement:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_details:{type:"sap.m.Text",multiple:false,visibility:"hidden"},_mainIndicator:{type:"sap.m.NumericContent",multiple:false}},events:{press:{}}}});s.prototype.setTitle=function(t){this.setProperty("title",t,true);this._getTitle().setText(t);return this};s.prototype.setSubtitle=function(t){this.setProperty("subtitle",t,true);this._getSubtitle().setText(t);return this};s.prototype.setUnitOfMeasurement=function(t){this.setProperty("unitOfMeasurement",t,true);this._getUnitOfMeasurement().setText(t);return this};s.prototype.setDetails=function(t){this.setProperty("details",t,true);this._getDetails().setText(t);return this};s.prototype.setNumber=function(t){this.setProperty("number",t,true);this._getMainIndicator().setValue(t);return this};s.prototype.setUnit=function(t){this.setProperty("unit",t,true);this._getMainIndicator().setScale(t);return this};s.prototype.setTrend=function(t){this.setProperty("trend",t,true);this._getMainIndicator().setIndicator(t);return this};s.prototype.setState=function(t){this.setProperty("state",t,true);this._getMainIndicator().setValueColor(t);return this};s.prototype._getTitle=function(){var t=this.getAggregation("_title");if(!t){t=new i({id:this.getId()+"-title",wrapping:true,maxLines:3});this.setAggregation("_title",t)}return t};s.prototype._getSubtitle=function(){var t=this.getAggregation("_subtitle");if(!t){t=new i({id:this.getId()+"-subtitle",wrapping:true,maxLines:2});this.setAggregation("_subtitle",t)}return t};s.prototype._getUnitOfMeasurement=function(){var t=this.getAggregation("_unitOfMeasurement");if(!t){t=new i({id:this.getId()+"-unitOfMeasurement",wrapping:false});this.setAggregation("_unitOfMeasurement",t)}return t};s.prototype._getDetails=function(){var t=this.getAggregation("_details");if(!t){t=new i({id:this.getId()+"-details",wrapping:false});this.setAggregation("_details",t)}return t};s.prototype._getMainIndicator=function(){var t=this.getAggregation("_mainIndicator");if(!t){t=new e({id:this.getId()+"-mainIndicator",withMargin:false,animateTextChange:false,truncateValueTo:5});this.setAggregation("_mainIndicator",t)}return t};s.create=function(t){var e={title:t.title,subtitle:t.subTitle,unitOfMeasurement:t.unitOfMeasurement,details:t.details};if(t.mainIndicator){e.number=t.mainIndicator.number;e.unit=t.mainIndicator.unit;e.trend=t.mainIndicator.trend;e.state=t.mainIndicator.state}if(t.sideIndicators){e.sideIndicators=t.sideIndicators.map(function(t){return new a(t)})}var i=new s(e);if(t.data){this._handleData(i,t.data)}return i};s._handleData=function(t,e){var i=new r;var a=e.request;if(e.json&&!a){i.setData(e.json)}if(a){n.fetch(a).then(function(t){i.setData(t);i.refresh();this.fireEvent("_updated")}.bind(this)).catch(function(t){})}t.setModel(i).bindElement({path:e.path||"/"})};s.prototype._getHeaderAccessibility=function(){var t=this._getTitle()?this._getTitle().getId():"",e=this._getSubtitle()?this._getSubtitle().getId():"",i=this._getUnitOfMeasurement()?this._getUnitOfMeasurement().getId():"",n=this.getSideIndicators()?this._getSideIndicatorIds():"",r=this._getDetails()?this._getDetails().getId():"",a=this._getMainIndicator()?this._getMainIndicator().getId():"";return t+" "+e+" "+i+" "+a+n+" "+r};s.prototype._getSideIndicatorIds=function(){var t="";this.getSideIndicators().forEach(function(e){t+=" "+e.getId()});return t};return s});